name: Update Dependencies

on:
    schedule:
        - cron: "0 0 * * 1" # Weekly on Monday
    workflow_dispatch:

jobs:
    update:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v4

            - uses: oven-sh/setup-bun@v1
              with:
                  bun-version: 1.1.31

            - name: Update dependencies
              run: |
                  bun update
                  bun run lint
                  bun run build

            - name: Create Pull Request
              uses: peter-evans/create-pull-request@v5
              with:
                  commit-message: "chore: update dependencies"
                  title: "chore: update dependencies"
                  body: "Automated dependency updates"
                  branch: deps/update-dependencies
